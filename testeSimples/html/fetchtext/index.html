<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>fetch text</title>
	<style>

    /* Fundo escurecido */
    .modal {
      display: flex;
      position: fixed;
      z-index: 999;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.5);
      align-items: center;
      justify-content: center;
    }

    /* Caixa do modal */
    .modal-content {
      background-color: white;
      padding: 20px;
      border-radius: 8px;
      max-width: 400px;
      text-align: center;
      position: relative;
    }

    /* Bot√£o de fechar */
    .close-btn {
      position: absolute;
      top: 10px;
      right: 15px;
      font-size: 20px;
      text-decoration: none;
      color: #aaa;
    }

    .close-btn:hover {
      color: #000;
    }

	</style>
</head>
<body>
	<h1>Fetch api text()</h1>

	<section id="content"></section>

	<hr>
	<hr>

	<section>
		<button id="b-modal">modal</button>

		<div id="content2"></div>
	</section>
	<script>
		async function chamarHtmlText() {
			const req = await fetch('./htmltext1.html')
			const res = await req.text()

			console.log(res)
			const contentid = document.querySelector('#content')
			if (contentid) {
				contentid.innerHTML = res

				const h1 = document.querySelector('#h-1')
				const p1 = document.querySelector('#p-1')

				if (h1 && p1) {
					h1.textContent = 'Naruto classico vs dragon ball z'
					p1.textContent = 'dois anime japoneses'
				}
			}
		}
		chamarHtmlText()

		// --------------------------------------------------------------

		async function getGithub() {
            const req = await fetch(`https://api.github.com/users/liliul`)
            const res = await req.json()

            return res 
        }

		async function chamarHtmlText2() {
			const req = await fetch('./htmltext2.html')
			const res = await req.text()

			console.log(res)
			const contentid = document.querySelector('#content2')
			if (contentid) {
				contentid.innerHTML = res

				// const h1 = document.querySelector('#h-1')
				// const p1 = document.querySelector('#p-1')

				// if (h1 && p1) {
				// 	h1.textContent = 'Naruto classico vs dragon ball z'
				// 	p1.textContent = 'dois anime japoneses'
				// }
			}
		}

		document.querySelector('#b-modal').addEventListener('click', async () => {
			const github = await getGithub()

			const div = document.createElement('div')
			div.classList.add('modal')
			div.append(await chamarHtmlText2())

			document.querySelector('#b-modal').setAttribute('disabled', true)

			const h1 = document.querySelector('#h-m')
			const fechar = document.querySelector('#fechar')
			if(fechar) {
				fechar.addEventListener('click', () => {
					const contentid = document.querySelector('#content2')
					contentid.innerHTML = ''
				document.querySelector('#b-modal').removeAttribute('disabled')
				})
			}else {
				console.log('nao')
			}

			if (h1) {
				h1.textContent = github.name
			}

		})
	</script>
</body>
</html>